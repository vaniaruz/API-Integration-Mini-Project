<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Anime Finder</title>
  <link rel="stylesheet" href="an.css">
  <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;600&family=Poppins:wght@400;600&display=swap" rel="stylesheet">
</head>
<body>
  <header>
    <h1>Anime Finder</h1>
    <p>Search your favorite anime and discover details</p>
  </header>

  <main>
    <div class="search-box">
      <input type="text" id="animeInput" placeholder="e.g. Naruto, One Piece, Attack on Titan">
      <button onclick="getAnime()">üîç Search</button>
    </div>

    <div id="loading" class="loading hidden">Loading...</div>
    <div id="result" class="anime-list"></div>
  </main>

  <footer>
    <p>Powered by <a href="https://jikan.moe/" target="_blank">Jikan API</a> | Made with ‚ù§Ô∏è</p>
  </footer>

  <script>
    async function getAnime() {
      const query = document.getElementById("animeInput").value.trim();
      const resultDiv = document.getElementById("result");
      const loading = document.getElementById("loading");

      resultDiv.innerHTML = "";
      loading.classList.remove("hidden");

      if (!query) {
        alert("Please enter an anime title!");
        loading.classList.add("hidden");
        return;
      }

      try {
        const response = await fetch(`https://api.jikan.moe/v4/anime?q=${query}&limit=10`);

        if (!response.ok) throw new Error("API request failed");

        const data = await response.json();
        loading.classList.add("hidden");

        if (data.data && data.data.length > 0) {
          data.data.forEach(anime => {
            const card = document.createElement("div");
            card.classList.add("anime-card");

            card.innerHTML = `
              <img src="${anime.images.jpg.image_url}" alt="${anime.title}">
              <h3>${anime.title}</h3>
              <p><strong>Score:</strong> ${anime.score ?? "N/A"}</p>
              <p>${anime.synopsis ? anime.synopsis.substring(0, 120) + "..." : "No description available."}</p>
              <a href="${anime.url}" target="_blank">More Info</a>
            `;

            resultDiv.appendChild(card);
          });
        } else {
          resultDiv.innerHTML = `<p style="color:red;">No results found for "${query}"</p>`;
        }

      } catch (error) {
        loading.classList.add("hidden");
        resultDiv.innerHTML = `<p style="color:red;">Error: ${error.message}</p>`;
      }
    }
  </script>
</body>
</html>
